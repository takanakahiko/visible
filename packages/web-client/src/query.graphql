fragment LocationLarge on Location {
  startLine
  startColumn
  endLine
  endColumn
}

fragment SourceLarge on Source {
  id
  title
  url
}

fragment HTMLPointerLarge on HTMLPointer {
  id
  source {
    ...SourceLarge
  }
  screenshot
  xpath
  location {
    ...LocationLarge
  }
}

fragment CSSPointerLarge on CSSPointer {
  id
  source {
    ...SourceLarge
  }
  screenshot
  xpath
  location {
    ...LocationLarge
  }
  xpath
  propertyName
}

fragment RuleLarge on Rule {
  id
  name
  type
  description
}

fragment ReportLarge on Report {
  id
  outcome
  target
  message
  rule {
    ...RuleLarge
  }
  pointers {
    ...on HTMLPointer {
      ...HTMLPointerLarge
    }
    ...on CSSPointer {
      ...CSSPointerLarge
    }
  }
}

fragment DiagnosisLarge on Diagnosis {
  id
  url
  status
  screenshot
  doneCount
  totalCount
  createdAt
  reports {
    ...ReportLarge
  }
}

query FetchDiagnosisLarge($id: ID!) {
	diagnosis(id: $id) {
		...DiagnosisLarge
	}
}

mutation createDiagnosis($url: String!) {
  createDiagnosis(url: $url) {
    ...DiagnosisLarge
  }
}

subscription subscribeDiagnosis($id: ID!) {
  diagnosis(id: $id) {
    ...DiagnosisLarge
  }
}
